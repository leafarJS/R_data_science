filter(count > 20, dest != "HNL") %>%
arrange(desc(count)) %>%
ggplot(aes(
dist,
delay
))+
geom_point(aes(size = count),alpha=1/3)+
geom_smooth(se = FALSE)
flights %>%
group_by(year, month, day) %>%
summarise(mean = mean(dep_delay))
flights %>%
group_by(year, month, day) %>%
summarise(mean = mean(dep_delay, na.rm = TRUE))
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(year, month, day) %>%
summarise(mean_dep = mean(dep_delay),
mean_arr = mean(arr_delay))
group_by(tailnum) %>%
summarise(delay = mean(arr_delay))
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(year, month, day, tailnum) %>%
summarise(mean_dep = mean(dep_delay),
mean_arr = mean(arr_delay))
group_by(tailnum) %>%
summarise(delay = mean(arr_delay)) %>%
ggplot(aes(
delay
))+
geom_freqpoly(binwidth = 10)
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(year, month, day, tailnum) %>%
summarise(mean_dep = mean(dep_delay),
mean_arr = mean(arr_delay))%>%
ggplot(aes(
delay
))+
geom_freqpoly(binwidth = 10)
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(year, month, day, tailnum) %>%
summarise(mean_dep = mean(dep_delay),
mean_arr = mean(arr_delay))%>%
ggplot(aes(
delay
))+
geom_freqpoly(binwidth = 10)
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(year, month, day, tailnum)
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(year, month, day, tailnum) %>%
view()
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(year, month, day, tailnum) %>%
summarise(mean_dep = mean(dep_delay),
mean_arr = mean(arr_delay)) %>%
view()
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(year, month, day, tailnum) %>%
summarise(mean_dep = mean(dep_delay),
mean_arr = mean(arr_delay)) %>%
ggplot(aes(
mean_dep
))+
geom_freqpoly(binwidth = 10)
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(year, month, day, tailnum) %>%
summarise(mean_dep = mean(dep_delay)/60,
mean_arr = mean(arr_delay)/60) %>%
ggplot(aes(
mean_dep
))+
geom_freqpoly(binwidth = 10)
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(year, month, day, tailnum) %>%
summarise(mean_dep = mean(dep_delay),
mean_arr = mean(arr_delay)) %>%
ggplot(aes(
mean_dep
))+
geom_freqpoly(binwidth = 10)
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(year, month, day, tailnum) %>%
summarise(mean_dep = mean(dep_delay),
mean_arr = mean(arr_delay)) %>%
ggplot(aes(
mean_dep
))+
geom_freqpoly(binwidth = 10)+
scale_y_log10()
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(year, month, day, tailnum) %>%
summarise(mean_dep = mean(dep_delay),
mean_arr = mean(arr_delay)) %>%
ggplot(aes(
mean_dep
))+
geom_freqpoly(binwidth = 10)+
scale_y_log2()
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(year, month, day, tailnum) %>%
summarise(mean_dep = mean(dep_delay),
mean_arr = mean(arr_delay)) %>%
ggplot(aes(
mean_dep
))+
geom_freqpoly(binwidth = 10)
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(year, month, day, tailnum) %>%
summarise(mean_dep = mean(dep_delay),
mean_arr = mean(arr_delay)) %>%
ggplot(aes(
mean_dep
count
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(year, month, day, tailnum) %>%
summarise(mean_dep = mean(dep_delay),
mean_arr = mean(arr_delay)) %>%
ggplot(aes(
mean_dep,
count
))+
geom_freqpoly(binwidth = 10)
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(year, month, day, tailnum) %>%
summarise(mean_dep = mean(dep_delay),
mean_arr = mean(arr_delay)) %>%
ggplot(aes(
mean_dep
))+
geom_freqpoly(binwidth = 10)
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(tailnum) %>%
summarise(
delay = mean(arr_delay, na.rm = TRUE),
n = n()
)+
ggplot(aes(
n,
delay
))+
geom_point(alpha = 1/10)
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(tailnum) %>%
summarise(
delay = mean(arr_delay, na.rm = TRUE),
count = n()
)+
ggplot(aes(
count,
delay
))+
geom_point(alpha = 1/10)
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(tailnum) %>%
summarise(
delay = mean(arr_delay, na.rm = TRUE),
count = n()
) %>%
ggplot(aes(
count,
delay
))+
geom_point(alpha = 1/10)
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(tailnum) %>%
summarise(
delay = mean(arr_delay, na.rm = TRUE),
count = n()
) %>%
filter(count > 25) %>%
ggplot(aes(
count,
delay
))+
geom_point(alpha = 1/10)
batting <- as_tibble(Lahman::Batting) %>%
view()
?Lahman::Batting
batting <- as_tibble(Lahman::Batting)
batting %>%
group_by(playerID) %>%
summarise(
ba = sum(H, na.rm = TRUE) / sum(AB, na.rm = TRUE),
ab = sum(AB, na.rm = TRUE)
)
batting %>%
group_by(playerID) %>%
summarise(
ba = sum(H, na.rm = TRUE) / sum(AB, na.rm = TRUE),
ab = sum(AB, na.rm = TRUE)
) %>%
filter(ab > 100) %>%
view()
batting %>%
group_by(playerID) %>%
summarise(
ba = sum(H, na.rm = TRUE) / sum(AB, na.rm = TRUE),
ab = sum(AB, na.rm = TRUE)
) %>%
filter(ab > 100) %>%
arrange(desc(ab)) %>%
view()
batting %>%
group_by(playerID) %>%
summarise(
ba = sum(H, na.rm = TRUE) / sum(AB, na.rm = TRUE),
ab = sum(AB, na.rm = TRUE)
) %>%
filter(ab > 100) %>%
arrange(desc(ab)) %>%
ggplot(aes(
ab,
ba
))+
geom_point()+
geom_smooth(se = FALSE)
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(dest) %>%
summarise(distance_sd = sd(distance)) %>%
arrange(desc(distance_sd)) %>%
view()
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(dest) %>%
summarise(distance_sd = sd(distance),
distance_IQR = IQR(distance),
distance_mad = mad(distance)) %>%
arrange(desc(distance_sd)) %>%
view()
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(dest) %>%
summarise(distance_sd = sd(distance),
distance_IQR = IQR(distance),
distance_mad = mad(distance),
first = min(dep_time),
last = max(dep_time)) %>%
arrange(desc(distance_sd)) %>%
view()
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(dest) %>%
summarise(distance_sd = sd(distance, na.rm = TRUE),
distance_IQR = IQR(distance),
distance_mad = mad(distance),
first = min(dep_time),
last = max(dep_time)) %>%
arrange(desc(distance_sd)) %>%
view()
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay), !is.na(distance)) %>%
group_by(dest) %>%
summarise(distance_sd = sd(distance),
distance_IQR = IQR(distance),
distance_mad = mad(distance),
first = min(dep_time),
last = max(dep_time)) %>%
arrange(desc(distance_sd)) %>%
view()
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay), !is.na(distance)) %>%
group_by(dest) %>%
summarise(distance_sd = sd(distance),
distance_IQR = IQR(distance),
distance_mad = mad(distance),
first = min(dep_time),
last = max(dep_time),
first_dep = first(dep_time),
last_dep = last(dep_time)) %>%
arrange(desc(distance_sd)) %>%
view()
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay), !is.na(distance)) %>%
group_by(year, month, day) %>%
mutate(r = min_rank(desc(dep_time))) %>%
filter(r %in% range(r)) %>%
view()
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay), !is.na(distance)) %>%
group_by(desc) %>%
summarise(carriers = n_distinct(carrier)) %>%
arrange(desc(carriers)) %>%
view()
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay), !is.na(distance)) %>%
group_by(desc) %>%
summarise(carriers = n_distinct(carriers)) %>%
arrange(desc(carriers)) %>%
view()
flights %>%
group_by(desc) %>%
filter(!is.na(dep_delay), !is.na(arr_delay), !is.na(distance)) %>%
summarise(carriers = n_distinct(carriers)) %>%
arrange(desc(carriers)) %>%
view()
flights %>%
group_by(desc) %>%
view()
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay), !is.na(distance)) %>%
group_by(dest) %>%
summarise(carriers = n_distinct(carriers)) %>%
arrange(desc(carriers)) %>%
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay), !is.na(distance)) %>%
group_by(dest) %>%
summarise(carriers = n_distinct(carriers)) %>%
arrange(desc(carriers)) %>%
view()
flights %>%
group_by(dest) %>%
summarise(carriers = n_distinct(carrier)) %>%
arrange(desc(carriers)) %>%
view()
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(dest) %>%
summarise(carriers = n_distinct(carrier)) %>%
arrange(desc(carriers)) %>%
view()
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
count(tailnum, wt = distance) %>%
view()
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(year, month, day) %>%
summarise(n_early = sum(dep_time < 500)) %>%
view()
flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
group_by(year, month, day) %>%
summarise(hour_prop = mean(arr_delay > 60)) %>%
view()
flights %>%
group_by(flight, year, month, day) %>%
summarise(flights = n()) %>%
view()
flights %>%
group_by(flight, year, month, day) %>%
summarise(per_day = n()) %>%
view()
flights %>%
group_by(year, month, day) %>%
summarise(per_day = n()) %>%
view()
flights %>%
summarise(per_day = sum(flight)) %>%
view()
flights %>%
group_by(year, month, day) %>%
summarise(per_day = n()) %>%
summarise(per_month = n()) %>%
view()
flights %>%
group_by(year, month, day) %>%
summarise(per_day = n()) %>%
summarise(per_month = sum(flight)) %>%
view()
flights %>%
filter(is.na(flight)) %>%
group_by(year, month, day) %>%
summarise(per_day = n()) %>%
summarise(per_month = sum(flight)) %>%
view()
flights %>%
group_by(year, month, day) %>%
view()
flights %>%
group_by(year, month, day) %>%
summarise(per_day = n()) %>%
view()
flights %>%
group_by(year, month, day) %>%
summarise(per_day = n()) %>%
ungroup() %>%
summarise(flights = n()) %>%
view()
flights %>%
group_by(year, month, day) %>%
summarise(per_day = n()) %>%
ungroup() %>%
summarise(flight = n()) %>%
view()
flights %>%
group_by(year, month, day) %>%
summarise(per_day = n()) %>%
ungroup() %>%
summarise(flights = sum(flight)) %>%
view()
flights %>%
group_by(year, month, day) %>%
summarise(per_day = n()) %>%
ungroup() %>%
summarise(flight = n()) %>%
view()
sum(flights$flight)
flights %>%
summarise(per_day = sum(flights)) %>%
view()
flights %>%
group_by(arr_delay, dep_delay) %>%
summarise(arr_mean = mean(arr_delay),
dep_mean = mean(dep_delay)) %>%
view()
flights %>%
group_by(arr_delay, dep_delay) %>%
summarise(arr_mean = mean(arr_delay),
dep_mean = mean(dep_delay)) %>%
mutate(retraso = dep_delay - arr_delay) %>%
view()
flights %>%
group_by(arr_delay, arr_time) %>%
summarise(arr_delay_mean = mean(arr_delay),
arr_mean_mean = mean(dep_delay)) %>%
mutate(retraso = dep_delay - arr_time) %>%
view()
flights %>%
filter(!is.na(arr_delay), !is.na(arr_time)) %>%
group_by(arr_delay, arr_time) %>%
summarise(arr_delay_mean = mean(arr_delay),
arr_mean_mean = mean(dep_delay)) %>%
mutate(retraso = dep_delay - arr_time) %>%
view()
flights %>%
filter(!is.na(arr_delay), !is.na(arr_time)) %>%
group_by(arr_delay, arr_time) %>%
summarise(arr_delay_mean = mean(arr_delay),
arr_mean_mean = mean(dep_delay)) %>%
view()
flights %>%
filter(!is.na(dep_time), !is.na(arr_time)) %>%
group_by(arr_delay, arr_time) %>%
summarise(dep_time_mean = mean(arr_delay),
arr_time_mean = mean(dep_delay)) %>%
view()
flights %>%
filter(!is.na(dep_time), !is.na(arr_time)) %>%
group_by(arr_delay, arr_time) %>%
summarise(dep_time_mean = mean(arr_delay),
arr_time_mean = mean(dep_delay)) %>%
arrange(desc(arr_delay)) %>%
view()
flights %>%
filter(!is.na(dep_time), !is.na(arr_time)) %>%
group_by(dep_time, arr_time) %>%
summarise(dep_time_mean = mean(dep_time),
arr_time_mean = mean(arr_time)) %>%
arrange(desc(arr_delay)) %>%
view()
flights %>%
filter(!is.na(dep_time), !is.na(arr_time)) %>%
group_by(dep_time, arr_time) %>%
summarise(dep_time_mean = mean(dep_time),
arr_time_mean = mean(arr_time)) %>%
arrange(desc(arr_time)) %>%
view()
flights %>%
filter(!is.na(dep_time), !is.na(arr_time)) %>%
group_by(year, month, day, dep_time, arr_time) %>%
summarise(dep_time_mean = mean(dep_time),
arr_time_mean = mean(arr_time)) %>%
arrange(desc(arr_time)) %>%
view()
flights %>%
filter(!is.na(dep_time), !is.na(arr_time)) %>%
group_by(year, month, day, dep_time, arr_time) %>%
summarise(dep_time_mean = median(dep_time),
arr_time_mean = median(arr_time)) %>%
arrange(desc(arr_time)) %>%
view()
flights %>%
filter(!is.na(dep_time), !is.na(arr_time)) %>%
group_by(year, month, day, dep_time, arr_time) %>%
mutate(dep_time_mean = median(dep_time),
arr_time_mean = median(arr_time)) %>%
arrange(desc(arr_time)) %>%
view()
flights %>%
group_by(year, month, day) %>%
filter(rank(desc(arr_delay))<60) %>%
view()
flights %>%
group_by(dest) %>%
filter(n() > 365) %>%
view()
flights %>%
filter(arr_delay > 0) %>%
mutate(prop__delay = arr_delay / sum(arr_delay)) %>%
select(year:day, dest, arr_delay, prop__delay) %>%
view()
